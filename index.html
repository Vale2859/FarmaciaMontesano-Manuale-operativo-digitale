<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <title>Portale Professionale ‚Äì Farmacia Montesano</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <!-- ==========================
         SCHERMATA LOGIN / REGISTRAZIONE
         =========================== -->
    <div id="auth" class="auth-screen">
      <div class="auth-card">
        <!-- LOGO SOLO IMMAGINE -->
        <div class="auth-logo-only">
          <!-- Se non vedi il logo, controlla che il nome del file sia giusto (es. logomedio) -->
          <img
            src="logomedio"
            alt="Farmacia Montesano"
            class="auth-logo-img"
          />
        </div>

        <!-- TITOLO -->
        <h2 class="login-title">Accesso Dipendenti</h2>

        <!-- MESSAGGIO DI ERRORE -->
        <div id="auth-error" class="error hidden"></div>

        <!-- ===== LOGIN ===== -->
        <div id="login-box">
          <label for="login-email">Email</label>
          <input
            type="email"
            id="login-email"
            placeholder="nome@farmaciamontesano.it"
          />

          <label for="login-password">Password</label>
          <div class="password-row">
            <input
              type="password"
              id="login-password"
              placeholder="Password"
            />
            <button
              type="button"
              class="btn-eye"
              onclick="togglePassword()"
              aria-label="Mostra / nascondi password"
            >
              üëÅ
            </button>
          </div>

          <button class="btn-primary" onclick="login()">Entra</button>

          <p class="small-text">
            Non hai ancora un account?
            <a href="#" onclick="showRegister(event)">Registrati</a>
          </p>

          <p class="small-text" style="margin-top: 10px; text-align: center">
            L'utilizzo del portale √® riservato al personale autorizzato della
            Farmacia Montesano.
          </p>
        </div>

        <!-- ===== REGISTRAZIONE ===== -->
        <div id="register-box" class="hidden">
          <label for="reg-name">Nome e cognome</label>
          <input
            type="text"
            id="reg-name"
            placeholder="Es. Mario Rossi"
          />

          <label for="reg-email">Email aziendale</label>
          <input
            type="email"
            id="reg-email"
            placeholder="nome@farmaciamontesano.it"
          />

          <label for="reg-password">Password</label>
          <input type="password" id="reg-password" placeholder="Password" />

          <button class="btn-primary" onclick="registerUser()">
            Invia richiesta di accesso
          </button>

          <p class="small-text muted-center">
            L'account dovr√† essere approvato dal titolare prima di poter
            accedere.
          </p>

          <p class="small-text muted-center">
            Hai gi√† un account?
            <a href="#" onclick="showLogin(event)">Torna al login</a>
          </p>
        </div>
      </div>
    </div>

    <!-- ==========================
         PORTALE INTERNO
         =========================== -->
    <div id="portal" class="portal hidden">
      <!-- BARRA IN ALTO -->
      <header class="topbar">
        <div class="topbar-left">
          <img
            src="logo-farmacia-montesano.jpg"
            alt="Farmacia Montesano"
            class="topbar-logo-img"
          />
          <div>
            <div class="topbar-title">Farmacia Montesano</div>
            <div class="topbar-subtitle">Portale professionale interno</div>
          </div>
        </div>

        <div class="topbar-user">
          <div class="user-pill">
            <span id="user-name-display">Operatore</span>
            <span id="user-role-display" class="role-badge">Ruolo</span>
          </div>
          <button
            class="btn-outline"
            type="button"
            onclick="goHome()"
          >
            Home
          </button>
          <button
            class="btn-outline"
            type="button"
            onclick="logout()"
          >
            Logout
          </button>
        </div>
      </header>

      <!-- LAYOUT: SIDEBAR + CONTENUTO -->
      <div class="layout">
        <!-- NAV LATERALE -->
        <nav class="sidebar">
          <div class="nav-label">Navigazione</div>

          <button
            id="nav-home"
            class="nav-btn active"
            onclick="showSection('home', this)"
          >
            üè† Home
          </button>

          <button
            id="nav-proc"
            class="nav-btn"
            onclick="showSection('procedures', this)"
          >
            üìÑ Procedure
          </button>

          <button
            id="nav-msg"
            class="nav-btn"
            onclick="showSection('messages', this)"
          >
            üì£ Comunicazioni
          </button>

          <button
            id="nav-training"
            class="nav-btn"
            onclick="showSection('training', this)"
          >
            üéì Formazione
          </button>

          <button
            id="nav-log"
            class="nav-btn"
            onclick="showSection('logistics', this)"
          >
            üì¶ Logistica
          </button>

          <button
            id="nav-personal"
            class="nav-btn"
            onclick="showSection('personal', this)"
          >
            üîê Area personale
          </button>

          <button
            id="nav-admin"
            class="nav-btn"
            onclick="showSection('admin', this)"
          >
            üëë Admin
          </button>

          <button
            id="nav-extra"
            class="nav-btn"
            onclick="showSection('extra', this)"
          >
            üíä Altre funzioni
          </button>
        </nav>

        <!-- CONTENUTO PRINCIPALE -->
        <main class="main">
          <!-- ================= HOME ‚Äì STILE APP ================= -->
          <section id="home" class="section visible">
            <div class="home-app-wrapper">
              <div class="app-phone">
                <!-- HEADER VERDE: DIPENDENTI CHE MANCHERANNO -->
                <div class="app-header">
                  <div class="app-header-top">
                    <div class="app-header-name">
                      Dipendenti che mancheranno
                    </div>
                    <div class="app-header-sub">
                      Prossime assenze approvate
                    </div>
                  </div>
                  <ul
                    id="home-absences-banner"
                    class="home-absences-banner"
                  >
                    <!-- Riempito da JS -->
                  </ul>
                </div>

                <!-- GRIGLIA TILE -->
                <div class="app-grid">
                  <!-- ASSENZE / FERIE -->
                  <button
                    class="app-tile app-tile-orange"
                    onclick="showAppScreen('assenze')"
                  >
                    <span class="app-tile-icon">üìí</span>
                    <span class="app-tile-text">
                      Richieste assenza / ferie
                    </span>
                  </button>

                  <!-- PROCEDURE -->
                  <button
                    class="app-tile app-tile-green"
                    onclick="showSection('procedures', document.getElementById('nav-proc'))"
                  >
                    <span class="app-tile-icon">üìÑ</span>
                    <span class="app-tile-text">Procedure</span>
                  </button>

                  <!-- COMUNICAZIONI -->
                  <button
                    class="app-tile app-tile-pink"
                    onclick="showSection('messages', document.getElementById('nav-msg'))"
                  >
                    <span class="app-tile-icon">üì£</span>
                    <span class="app-tile-text">Comunicazioni</span>
                  </button>

                  <!-- FORMAZIONE -->
                  <button
                    class="app-tile app-tile-blue"
                    onclick="showSection('training', document.getElementById('nav-training'))"
                  >
                    <span class="app-tile-icon">üéì</span>
                    <span class="app-tile-text">Formazione</span>
                  </button>

                  <!-- LOGISTICA -->
                  <button
                    class="app-tile app-tile-yellow"
                    onclick="showSection('logistics', document.getElementById('nav-log'))"
                  >
                    <span class="app-tile-icon">üì¶</span>
                    <span class="app-tile-text">Logistica</span>
                  </button>

                  <!-- AREA PERSONALE -->
                  <button
                    class="app-tile app-tile-purple"
                    onclick="showSection('personal', document.getElementById('nav-personal'))"
                  >
                    <span class="app-tile-icon">üîê</span>
                    <span class="app-tile-text">Area personale</span>
                  </button>

                  <!-- ADMIN -->
                  <button
                    class="app-tile app-tile-teal"
                    onclick="showSection('admin', document.getElementById('nav-admin'))"
                  >
                    <span class="app-tile-icon">üëë</span>
                    <span class="app-tile-text">Admin</span>
                  </button>

                  <!-- ALTRE FUNZIONI -->
                  <button
                    class="app-tile app-tile-grey"
                    onclick="showSection('extra', document.getElementById('nav-extra'))"
                  >
                    <span class="app-tile-icon">üíä</span>
                    <span class="app-tile-text">Altre funzioni</span>
                  </button>
                </div>

                <!-- SCHERMATE INTERNE APP -->
                <div class="app-screens">
                  <!-- Schermata base (vuota per ora) -->
                  <div
                    id="screen-home"
                    class="app-screen app-screen-visible"
                  ></div>

                  <!-- SCHERMATA ASSENZE: RICHIESTA + STORICO -->
                  <div id="screen-assenze" class="app-screen">
                    <h3 class="app-section-title">
                      Richiesta ferie / assenza
                    </h3>

                    <div class="absence-layout">
                      <!-- COLONNA SINISTRA: RICHIESTA -->
                      <div class="absence-form">
                        <label for="leave-type">Tipo</label>
                        <select id="leave-type">
                          <option value="ferie">Ferie</option>
                          <option value="permesso_orario">
                            Permesso orario
                          </option>
                          <option value="permesso_giornata">
                            Permesso giornata
                          </option>
                          <option value="recupero_ore">
                            Recupero ore
                          </option>
                        </select>

                        <label for="leave-start">Dal giorno</label>
                        <input type="date" id="leave-start" />

                        <label for="leave-end">Al giorno (opzionale)</label>
                        <input type="date" id="leave-end" />

                        <label for="leave-note"
                          >Note (es. orario, motivazione)</label
                        >
                        <textarea
                          id="leave-note"
                          rows="3"
                          placeholder="Es. dalle 16 alle 19, visita medica, ferie estive, ecc."
                        ></textarea>

                        <button
                          type="button"
                          class="btn-primary"
                          onclick="sendLeaveRequest()"
                        >
                          Invia richiesta
                        </button>
                      </div>

                      <!-- COLONNA DESTRA: STORICO -->
                      <div class="absence-history">
                        <h4>Storico richieste</h4>
                        <table class="table-simple" id="leave-table">
                          <thead>
                            <tr>
                              <th>Data richiesta</th>
                              <th>Tipo</th>
                              <th>Periodo / ore</th>
                              <th>Stato</th>
                            </tr>
                          </thead>
                          <tbody>
                            <!-- Riempito da JS -->
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- NAV IN BASSO NELLA CARD -->
                <div class="app-bottom-nav">
                  <button
                    id="nav-app-home"
                    class="app-nav-btn app-nav-btn-active"
                    onclick="showAppScreen('home')"
                  >
                    Home
                  </button>
                  <button
                    id="nav-app-assenze"
                    class="app-nav-btn"
                    onclick="showAppScreen('assenze')"
                  >
                    Assenze
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- ================ PROCEDURE ================ -->
          <section id="procedures" class="section">
            <div class="section-header">
              <h2>Procedure</h2>
              <p class="subtitle">
                Tutte le procedure interne della cassa, magazzino e gestione
                farmacia.
              </p>
            </div>

            <div class="proc-layout">
              <div id="proc-categories" class="proc-categories">
                <!-- Categorie riempite da JS -->
              </div>
              <div id="proc-list" class="list">
                <!-- Procedure riempite da JS -->
              </div>
            </div>
          </section>

          <!-- ================ COMUNICAZIONI ================ -->
          <section id="messages" class="section">
            <div class="section-header">
              <h2>Comunicazioni veloci</h2>
              <p class="subtitle">
                Note importanti di giornata, turni extra, errori da evitare,
                nuove promo, consegne, ecc.
              </p>
            </div>

            <div id="message-list" class="list">
              <!-- Messaggi riempiti da JS -->
            </div>
          </section>

          <!-- ================ FORMAZIONE ================ -->
          <section id="training" class="section">
            <div class="section-header">
              <h2>Formazione</h2>
              <p class="subtitle">
                Appunti rapidi sui corsi e sui contenuti da ripassare.
              </p>
            </div>

            <div class="two-cols">
              <div class="card">
                <h3>Argomenti in evidenza</h3>
                <ul id="training-list" class="bullet-list">
                  <!-- Riempito da JS -->
                </ul>
              </div>

              <div class="card">
                <h3>Appunti personali</h3>
                <textarea
                  id="training-notes"
                  rows="8"
                  placeholder="Scrivi qui gli appunti sui corsi, ECM, aggiornamenti..."
                ></textarea>
                <div class="card-actions-row">
                  <button
                    class="btn-primary small"
                    type="button"
                    onclick="saveTrainingNotes()"
                  >
                    Salva appunti
                  </button>
                  <span
                    id="training-saved"
                    class="saved-label hidden"
                    >Salvato</span
                  >
                </div>
              </div>
            </div>
          </section>

          <!-- ================ LOGISTICA ================ -->
          <section id="logistics" class="section">
            <div class="section-header">
              <h2>Logistica</h2>
              <p class="subtitle">
                Riepilogo corrieri, consegne, resi e controlli di magazzino.
              </p>
            </div>

            <div class="two-cols">
              <div class="card">
                <h3>Corrieri / ritiri</h3>
                <ul id="logistics-couriers" class="bullet-list">
                  <!-- JS -->
                </ul>
              </div>
              <div class="card">
                <h3>Scadenze e controlli</h3>
                <ul id="logistics-expiry" class="bullet-list">
                  <!-- JS -->
                </ul>
              </div>
            </div>
          </section>

          <!-- ================ AREA PERSONALE ================ -->
          <section id="personal" class="section">
            <div class="section-header">
              <h2>Area personale</h2>
              <p class="subtitle">
                Spazio privato di ogni dipendente: appunti rapidi e documenti
                personali.
              </p>
            </div>

            <div class="two-cols">
              <div class="card">
                <h3>Note veloci</h3>
                <textarea
                  id="quick-notes"
                  rows="6"
                  placeholder="Promemoria personali, cose da fare..."
                ></textarea>
                <div class="card-actions-row">
                  <button
                    class="btn-primary small"
                    type="button"
                    onclick="saveQuickNotes()"
                  >
                    Salva
                  </button>
                  <span
                    id="quick-saved"
                    class="saved-label hidden"
                    >Salvato</span
                  >
                </div>
              </div>

              <div class="card">
                <h3>Documenti personali</h3>
                <div class="field-row wrap">
                  <div class="field-flex">
                    <label for="personal-doc-title">Titolo</label>
                    <input
                      type="text"
                      id="personal-doc-title"
                      placeholder="Es. Turni 2025, Note ferie, ecc."
                    />
                  </div>
                  <div class="field-flex">
                    <label for="personal-doc-desc">Descrizione</label>
                    <input
                      type="text"
                      id="personal-doc-desc"
                      placeholder="Breve descrizione (facoltativa)"
                    />
                  </div>
                  <div style="align-self: flex-end">
                    <button
                      class="btn-primary small"
                      type="button"
                      onclick="addPersonalDoc()"
                    >
                      Aggiungi
                    </button>
                  </div>
                </div>

                <div id="personal-doc-list" class="list" style="margin-top: 8px">
                  <!-- JS -->
                </div>
              </div>
            </div>

            <div class="card" style="margin-top: 12px">
              <h3>Note riservate</h3>
              <textarea
                id="personal-notes"
                rows="4"
                placeholder="Note personali visibili solo a te."
              ></textarea>
              <div class="card-actions-row">
                <button
                  class="btn-primary small"
                  type="button"
                  onclick="savePersonalNotes()"
                >
                  Salva note
                </button>
                <span
                  id="personal-notes-saved"
                  class="saved-label hidden"
                  >Salvato</span
                >
              </div>
            </div>
          </section>

          <!-- ================ AREA ADMIN ================ -->
          <section id="admin" class="section">
            <div class="section-header">
              <h2>Amministrazione</h2>
              <p class="subtitle">
                Gestione utenti, ferie/permessi e procedure ufficiali del
                portale.
              </p>
            </div>

            <div class="admin-grid">
              <!-- UTENTI -->
              <div class="card">
                <h3>Utenti registrati</h3>
                <div id="admin-users" class="list">
                  <!-- JS -->
                </div>
              </div>

              <!-- COMUNICAZIONI / FERIE / PROCEDURE -->
              <div class="card">
                <h3>Invia comunicazione</h3>

                <label for="admin-msg-title">Titolo</label>
                <input
                  type="text"
                  id="admin-msg-title"
                  placeholder="Es. Nuove regole cassa da luned√¨"
                />

                <label for="admin-msg-body">Testo</label>
                <textarea
                  id="admin-msg-body"
                  rows="4"
                  placeholder="Testo della comunicazione..."
                ></textarea>

                <div class="field-row wrap" style="margin-top: 6px">
                  <div class="field-flex">
                    <label for="admin-msg-target">Destinatari</label>
                    <select id="admin-msg-target">
                      <option value="all">Tutti i dipendenti</option>
                    </select>
                  </div>
                  <div class="field-flex">
                    <label for="admin-msg-priority">Priorit√†</label>
                    <select id="admin-msg-priority">
                      <option value="normale">Normale</option>
                      <option value="alta">Alta</option>
                      <option value="urgente">Urgente</option>
                    </select>
                  </div>
                </div>

                <div class="card-actions-row">
                  <button
                    type="button"
                    class="btn-primary small"
                    onclick="adminSendMessage()"
                  >
                    Invia comunicazione
                  </button>
                </div>
              </div>
            </div>

            <!-- RICHIESTE FERIE / PERMESSI -->
            <div class="card" style="margin-top: 14px">
              <h3>Richieste ferie / permessi</h3>
              <div id="admin-leave-list" class="list">
                <!-- JS -->
              </div>
            </div>

            <!-- PROCEDURE COMPLETE -->
            <div class="card" style="margin-top: 14px">
              <h3>Gestione procedure</h3>

              <div class="field-row wrap">
                <div class="field-flex">
                  <label for="admin-proc-cat">Categoria</label>
                  <input
                    type="text"
                    id="admin-proc-cat"
                    placeholder="Es. Cassa, Magazzino..."
                  />
                </div>
                <div class="field-flex">
                  <label for="admin-proc-title">Titolo procedura</label>
                  <input
                    type="text"
                    id="admin-proc-title"
                    placeholder="Es. Anticipi ‚Äì i clienti pagano subito"
                  />
                </div>
              </div>

              <label for="admin-proc-body" style="margin-top: 8px"
                >Testo procedura</label
              >
              <textarea
                id="admin-proc-body"
                rows="5"
                placeholder="Scrivi qui i passaggi della procedura..."
              ></textarea>

              <div class="card-actions-row">
                <button
                  class="btn-primary small"
                  type="button"
                  onclick="adminSaveProcedure()"
                >
                  Salva / aggiorna procedura
                </button>
              </div>

              <div
                id="admin-proc-list"
                class="list"
                style="margin-top: 10px"
              >
                <!-- Elenco completo procedure (solo admin) -->
              </div>
            </div>
          </section>

          <!-- ================ ALTRE FUNZIONI ================ -->
          <section id="extra" class="section">
            <div class="section-header">
              <h2>Altre funzioni</h2>
              <p class="subtitle">
                Sezione aperta per future funzioni del portale (note veloci,
                promemoria, link utili, ecc.).
              </p>
            </div>

            <div class="card">
              <h3>In sviluppo</h3>
              <p>
                Qui possiamo aggiungere in futuro:
              </p>
              <ul class="bullet-list">
                <li>Collegamenti a documenti esterni (Google Drive, PDF);</li>
                <li>
                  Link rapidi a siti di lavoro (ASL, fornitori, ecc.);
                </li>
                <li>
                  Piccoli promemoria condivisi per tutta la farmacia.
                </li>
              </ul>
            </div>
          </section>
        </main>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
