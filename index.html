<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<title>Portale Farmacia Montesano - Essenziale</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="style.css" />
</head>
<body>
<!-- SCHERMATA LOGIN / REGISTRAZIONE -->
<div id="auth" class="auth-screen">
<div class="auth-card">
<h1 class="logo-title">Farmacia Montesano</h1>
<p class="logo-subtitle">Portale interno dipendenti &amp; titolare</p>
<div id="login-box">
<h2>Accesso</h2>
<label>Email</label>
<input type="email" id="login-email" placeholder="nome@farmaciamontesano.it" />
<label>Password</label>
<input type="password" id="login-password" placeholder="Password" />
<button class="btn-primary" onclick="login()">Entra</button>
<p class="small-text">
Non hai un account?
<a href="#" onclick="showRegister(event)">Registrati</a>
</p>
<p class="small-text">
Password dimenticata? <br />
<strong>Solo il titolare può reimpostarla dal pannello Admin.</strong>
</p>
</div>
<div id="register-box" class="hidden">
<h2>Registrazione dipendente</h2>
<label>Nome e cognome</label>
<input type="text" id="reg-name" placeholder="Es. Daniela Andrisani" />
<label>Email</label>
<input type="email" id="reg-email" placeholder="Email aziendale" />
<label>Password</label>
<input type="password" id="reg-password" placeholder="Crea una password" />
<button class="btn-primary" onclick="registerUser()">Crea account</button>
<p class="small-text">
Hai già un account?
<a href="#" onclick="showLogin(event)">Torna al login</a>
</p>
</div>
<p id="auth-error" class="error-text hidden"></p>
</div>
</div>
<!-- PORTALE -->
<div id="portal" class="portal hidden">
<header class="topbar">
<div class="topbar-logo">Farmacia Montesano – Gestionale</div>
<div class="topbar-user">
<span id="user-name-display"></span>
<span id="user-role-display" class="role-badge"></span>
<button class="btn-outline" onclick="logout()">Logout</button>
</div>
</header>
<div class="layout">
<aside class="sidebar">
<div class="nav-label">Menu</div>
<button class="nav-btn active" id="nav-home" onclick="showSection('home', this)">■ Dashboard</button>
<button class="nav-btn" id="nav-proc" onclick="showSection('procedures', this)">■ Procedure</button>
<button class="nav-btn" id="nav-msg" onclick="showSection('messages', this)">■ Comunicazioni</button>
<button class="nav-btn" id="nav-leave" onclick="showSection('leave', this)">■ Ferie &amp; permessi</button>
<button class="nav-btn hidden" id="nav-admin" onclick="showSection('admin', this)">■ Admin</button>
</aside>
<main class="main">
<!-- DASHBOARD -->
<section id="home" class="section visible">
<h2 id="home-title">Benvenuto</h2>
<p class="subtitle">
Qui trovi le cose essenziali: procedure di cassa, comunicazioni interne e richieste ferie/permessi.
</p>
<div class="cards-grid">
<div class="card">
<h3>■ Procedure</h3>
<p>Anticipi, ticket, POS, sotto cassa.</p>
</div>
<div class="card">
<h3>■ Comunicazioni</h3>
<p>Avvisi rapidi dal titolare.</p>
</div>
<div class="card">
<h3>■ Ferie &amp; permessi</h3>
<p>Richieste e storico.</p>
</div>
</div>
<div class="card">
<h3>■ Dati profilo</h3>
<div id="user-info"></div>
</div>
</section>
<!-- PROCEDURE (SOLO LETTURA PER DIPENDENTI, MODIFICA IN ADMIN) -->
<section id="procedures" class="section">
<h2>Procedure interne</h2>
<p class="subtitle">Procedure essenziali per la cassa e gestione cliente.</p>
<div id="proc-list" class="list"></div>
</section>
<!-- COMUNICAZIONI -->
<section id="messages" class="section">
<h2>Comunicazioni interne</h2>
<p class="subtitle">Messaggi inviati dal titolare / admin.</p>
<div id="message-list" class="list"></div>
</section>
<!-- FERIE & PERMESSI -->
<section id="leave" class="section">
<h2>Ferie &amp; permessi</h2>
<p class="subtitle">Invia una richiesta e controlla lo stato.</p>
<div class="card">
<h3>Nuova richiesta</h3>
<label>Tipo</label>
<select id="leave-type">
<option value="ferie">Ferie</option>
<option value="permesso_orario">Permesso orario</option>
<option value="permesso_giornata">Permesso giornata</option>
</select>
<label>Data / inizio</label>
<input type="date" id="leave-start" />
<label>Data fine (opzionale)</label>
<input type="date" id="leave-end" />
<label>Note (opzionale)</label>
<textarea id="leave-note" rows="3"></textarea>
<button class="btn-primary" style="width:auto;margin-top:10px;" onclick="sendLeaveRequest()">
Invia richiesta
</button>
</div>
<div class="card">
<h3>Le tue richieste</h3>
<table class="table-simple" id="leave-table">
<thead>
<tr>
<th>Data richiesta</th>
<th>Tipo</th>
<th>Periodo</th>
<th>Stato</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</section>
<!-- ADMIN -->
<section id="admin" class="section">
<h2>Area Admin (titolare)</h2>
<p class="subtitle">Gestione essenziale di utenti, procedure, comunicazioni e ferie.</p>
<div class="card">
<h3>■ Utenti</h3>
<p class="small-muted">
Vedi utenti registrati e reimposta le password. La password dimenticata viene gestita solo da qui.
</p>
<div id="admin-users"></div>
</div>
<div class="card">
<h3>■ Nuova comunicazione</h3>
<label>Titolo</label>
<input id="admin-msg-title" type="text" />
<label>Testo</label>
<textarea id="admin-msg-body" rows="3"></textarea>
<label>Destinatario</label>
<select id="admin-msg-target">
<option value="all">Tutti i dipendenti</option>
</select>
<button class="btn-primary" style="width:auto;margin-top:10px;" onclick="adminSendMessage()">
Invia comunicazione
</button>
</div>
<div class="card">
<h3>■ Procedure di cassa</h3>
<p class="small-muted">Aggiusta o aggiungi procedure essenziali.</p>
<label>Titolo procedura</label>
<input type="text" id="admin-proc-title" placeholder="Es. Anticipi – i clienti pagano subito" />
<label>Testo</label>
<textarea id="admin-proc-body" rows="4"
placeholder="Descrivi in modo chiaro tutti i passaggi."></textarea>
<button class="btn-primary" style="width:auto;margin-top:10px;" onclick="adminSaveProcedure()">
Salva / aggiorna
</button>
<div id="admin-proc-list" class="list" style="margin-top:10px;"></div>
</div>
<div class="card">
<h3>■ Richieste ferie &amp; permessi</h3>
<p class="small-muted">Approva o rifiuta le richieste inviate dai dipendenti.</p>
<div id="admin-leave-list" class="list"></div>
</div>
</section>
</main>
</div>
</div>
<script src="script.js"></script>
</body>
</html>
